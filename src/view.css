.rich-text-overlay.is-mobile .custom-titlebar {
	/* Use padding so we don't push the container off-screen */
	padding-top: 132px !important;
	padding-bottom: 13px !important;

	/* If you strictly need margin, you must calculate height: */
	/* margin-top: 128px !important; */
	/* height: calc(100% - 128px) !important; */
}

.rich-text-overlay {
	max-width: 100vw;
}

/* ---------------------------------------------------------------------------- */

/* 1. Hide Standard Obsidian Editors when mode is active */
/* The class is on .view-content, so we look for children inside it */
.view-content.is-rich-text-mode .markdown-source-view,
.view-content.is-rich-text-mode .markdown-reading-view {
	display: none !important;
}

/* 2. Show Custom Overlay when mode is active */
.view-content.is-rich-text-mode .rich-text-overlay {
	display: flex !important;
}

/* --- OVERLAY LAYOUT --- */

/* Default State: Hidden */
.rich-text-overlay {
	display: none;
	background-color: var(--background-primary);
	height: 100%;
	width: 100%;
	flex-direction: column;
	overflow: hidden; /* Prevent double scrollbars */
}

/* Ensure React Root fills the space */
.rich-text-overlay .react-root {
	height: 100%;
	width: 100%;
	display: flex;
	flex-direction: column;
}

/* Ensure Editor fills the space */
.rich-text-overlay .mdxeditor {
	flex: 1; /* Take remaining height */
	overflow: auto; /* Internal scrolling */
	display: flex;
	flex-direction: column;
}

.rich-text-overlay.is-mobile .mdxeditor {
	padding-bottom: 52px !important;
}

.mdxeditor-root-contenteditable {
	padding-left: 24px;
	padding-right: 24px;
}

.rich-text-overlay.is-mobile .mdxeditor-toolbar {
	position: fixed;
	top: auto !important;
	bottom: 0 !important;
	left: 0;
	right: 0;
	margin: 0;
	padding-inline: var(--spacing-3);
	background-color: var(--background-primary);
	max-height: 72px;
	min-height: 48px;
	height: auto !important;
	box-shadow: 0 -2px 16px rgba(0, 0, 0, 0.25);
	border-radius: 0;
	opacity: 0;
	transform: translateY(6px);
	pointer-events: none;
	transition:
		opacity 0.25s ease,
		transform 0.25s ease;
	z-index: 50;
}

.rich-text-overlay.is-mobile .mdxeditor:focus-within .mdxeditor-toolbar {
	opacity: 1;
	transform: translateY(0);
	pointer-events: auto;
}

/* Make the editable area take available space */
.mdxeditor-root-contenteditable {
	flex-grow: 1;
	overflow-y: auto;
}

.rich-text-overlay.is-readable-line-width
	.mdxeditor-root-contenteditable
	> :first-child {
	/* Use Obsidian's configured line width */
	max-width: var(--file-line-width);

	/* Center the editor */
	margin: 0 auto;

	/* Ensure it doesn't touch edges on small screens */
	width: 100%;
}

.rich-text-overlay.is-readable-line-width .mdxeditor-toolbar {
	/* justify-content: center; */
	max-width: 858px;
	margin: 0 auto;
	width: 100%;
}

/* ---------------------------------------------------------------------------- */

blockquote {
	/* 1. Define the vertical line: width, style, and color */
	border-left: 2px solid var(--interactive-accent);

	/* 2. Add space between the line and the quoted text */
	padding-left: 1rem;

	/* Optional: A bit of margin for visual separation */
	margin: 1.5rem 0;
}

/* make MDXEditor flex and stop growing with content */
.mdxeditor,
.mxeditor {
	height: 100%;
	display: flex;
	flex-direction: column;
}

/* editable area takes remaining space + scrolls */
.mdxeditor-root-contenteditable,
.mxeditor-content-editable {
	flex: 1 1 0;
	min-height: 0 !important;
}

.rich-text-view-root {
	background-color: var(--background-primary) !important;
}

.mxeditor :has(> .mxeditor-content-editable) {
	height: 100%;
	min-height: 0;
	display: flex;
	flex-direction: column;
}

.custom-title-input {
	/* 1. Remove default Input styles */
	background: transparent;
	border: none;
	outline: none;
	box-shadow: none;
	width: 100%;
	padding: 0;
	margin: 0;

	color: var(--inline-title-color);

	/* 3. Match Obsidian Inline Title Font Settings */
	font-size: var(--inline-title-size);
	font-weight: var(--inline-title-weight);
	line-height: var(--inline-title-line-height);
	font-style: var(--inline-title-style);
	font-variant: var(--inline-title-variant);
	font-family: var(--inline-title-font);
	letter-spacing: -0.015em;
}

/* render tags as a pill / badge */
.mxeditor-content-editable a[href^="about:blank"] {
	color: var(--tag-color);
	background-color: var(--tag-background);
	border-radius: 999px;
	border: var(--tag-border-width) solid var(--tag-border-color);
	font-weight: var(--tag-weight);
	font-size: var(--tag-size);
	padding-inline-start: var(--tag-padding-x);
	padding-inline-end: var(--tag-padding-x);
	text-decoration: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	margin: 0 0.15rem;
	transition: background-color 0.2s ease;
}

.mxeditor-content-editable a[href^="tag:"]:hover {
	filter: brightness(1.15);
}
